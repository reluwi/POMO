<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:POMO"
             x:Class="POMO.TaskPage"
             BackgroundColor="#003366">

    <!-- Background Gradient -->
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#5B9BF3" Offset="0.0" />
            <GradientStop Color="#A0C4FF" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <ScrollView>
        <!-- Main Layout -->
        <Grid Padding="20">
            <!-- Main Content -->
            <VerticalStackLayout x:Name="MainContent" Spacing="20" VerticalOptions="FillAndExpand" 
                                AbsoluteLayout.LayoutBounds="0,0,1,1" AbsoluteLayout.LayoutFlags="All">
                <!-- App Header -->
                <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                    <Image Source="bear_timer.png" WidthRequest="80" HeightRequest="80" />
                    <Label Text="POMO TASK" 
                        FontSize="36" 
                        FontAttributes="Bold" 
                        TextColor="White" 
                        HorizontalOptions="Center" />
                </VerticalStackLayout>

                <!-- Create New Task Button -->
                <Button Text="+ Create new task"
                    FontSize="18"
                    BackgroundColor="Transparent"
                    TextColor="White"
                    FontAttributes="Bold"
                    HorizontalOptions="Center"
                    Clicked="OnCreateNewTaskClicked" />

                <!-- Tasks Section -->
                <VerticalStackLayout Spacing="20" VerticalOptions="FillAndExpand">
                    <!-- Existing Tasks -->
                    <VerticalStackLayout Spacing="10">
                        <Grid>
                            <Label Text="Existing Tasks"
                            FontSize="18"
                            TextColor="White"
                            FontAttributes="Bold" />
                            <ImageButton x:Name="ExistingTasksToggle"
                                    Source="arrow_up.png"
                                    WidthRequest="30"
                                    HeightRequest="30"
                                    HorizontalOptions="End"
                                    Clicked="OnExistingTasksToggleClicked" />
                        </Grid>
                        <BoxView HeightRequest="1" BackgroundColor="White" />
                        <VerticalStackLayout x:Name="ExistingTasksContent" Spacing="10" IsVisible="True" VerticalOptions="FillAndExpand">
                            <Border StrokeShape="RoundRectangle 10" BackgroundColor="White" Padding="15">
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnTaskTapped" />
                                </Border.GestureRecognizers>
                                <VerticalStackLayout>
                                    <Label Text="DUE 12/27/2024"
                                    FontSize="16"
                                    TextColor="Black" />
                                    <Label Text="Linisin yung Skibidi Toilet"
                                    FontSize="16"
                                    TextColor="Black" />
                                    <Label Text="Naninilaw na ang bowl" 
                                    FontSize="16"
                                    TextColor="Black" 
                                    IsVisible="False"/>
                                    <Label Text="Number of Session: 3" 
                                    FontSize="16"
                                    TextColor="Black" 
                                    IsVisible="False"/>
                                </VerticalStackLayout>
                            </Border>
                            <Border StrokeShape="RoundRectangle 10" BackgroundColor="White" Padding="15">
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnTaskTapped" />
                                </Border.GestureRecognizers>
                                <VerticalStackLayout>
                                    <Label Text="DUE 12/28/2024"
                                FontSize="16"
                                TextColor="Black" />
                                    <Label Text="Assessment: Brainrot-ology"
                                FontSize="16"
                                TextColor="Black" />
                                    <Label Text="TikTok na malala" 
                                FontSize="16"
                                TextColor="Black" 
                                IsVisible="False"/>
                                    <Label Text="Number of Session: 2" 
                                FontSize="16"
                                TextColor="Black" 
                                IsVisible="False"/>
                                </VerticalStackLayout>
                            </Border>
                        </VerticalStackLayout>
                    </VerticalStackLayout>

                    <!-- Completed Tasks -->
                    <VerticalStackLayout Spacing="10">
                        <Grid>
                            <Label Text="Completed Tasks"
                            FontSize="18"
                            TextColor="White"
                            FontAttributes="Bold" />
                            <ImageButton x:Name="CompletedTasksToggle"
                            Source="arrow_up.png"
                            WidthRequest="30"
                            HeightRequest="30"
                            HorizontalOptions="End"
                            Clicked="OnCompletedTasksToggleClicked" />
                        </Grid>
                        <BoxView HeightRequest="1" BackgroundColor="White" />
                        <VerticalStackLayout x:Name="CompletedTasksContent" Spacing="10" IsVisible="True">
                            <Border StrokeShape="RoundRectangle 10" BackgroundColor="White" Padding="15">
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnTaskTapped" />
                                </Border.GestureRecognizers>
                                <VerticalStackLayout>
                                    <Label Text="Due: 12/21/2024"
                                FontSize="16"
                                TextColor="Black" />
                                    <Label Text="âœ“ Activity 3 - English or Spanish"
                                FontSize="16"
                                TextColor="Black" />
                                    <Label Text="Gumalaw Bading" 
                                FontSize="16"
                                TextColor="Black" 
                                IsVisible="False"/>
                                    <Label Text="Number of Session: 5" 
                                FontSize="16"
                                TextColor="Black" 
                                IsVisible="False"/>
                                </VerticalStackLayout>
                            </Border>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </VerticalStackLayout>

            <!-- Task Popup -->
            <local:TaskPopUp x:Name="TaskPopUp" 
            IsVisible="False"
            AbsoluteLayout.LayoutBounds="0.5,0.5,-1,-1"
            AbsoluteLayout.LayoutFlags="PositionProportional"
            BackgroundColor="#000000AA" />

            <!-- Specific Task Popup -->
            <local:SpecificTaskPopUp x:Name="SpecificTaskPopUp" 
            IsVisible="False"
            AbsoluteLayout.LayoutBounds="0.5,0.5,-1,-1"
            AbsoluteLayout.LayoutFlags="PositionProportional"
            BackgroundColor="#000000AA"/>

            <!-- Bottom Navigation -->
            <Border StrokeShape="RoundRectangle 20" BackgroundColor="White" VerticalOptions="End" HeightRequest="80">
                <Grid>
                    <HorizontalStackLayout HorizontalOptions="Center" Spacing="40">
                        <ImageButton Source="home_button_unclicked.png" WidthRequest="50" HeightRequest="50"
                                 Clicked="OnHomeButtonTapped" />
                        <ImageButton Source="task_button.png" WidthRequest="50" HeightRequest="50" />
                    </HorizontalStackLayout>
                </Grid>
            </Border>
        </Grid>
    </ScrollView>
</ContentPage>